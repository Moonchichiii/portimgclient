import{e as l,g as f,h as u,b as r,j as i,u as p,r as h}from"./main-BXXiCRtj.js";import{f as x}from"./postSlice-CE6dtq-H.js";const a=l("profiles/fetchProfiles",async()=>(await f.get("/api/profiles/")).data),j=u({name:"profiles",initialState:{profiles:[],status:"idle",error:null},extraReducers:o=>{o.addCase(a.pending,s=>{s.status="loading"}).addCase(a.fulfilled,(s,t)=>{s.status="succeeded",s.profiles=t.payload}).addCase(a.rejected,(s,t)=>{s.status="failed",s.error=t.error.message})}});j.reducer;const c=l("notifications/fetchNotifications",async()=>(await f.get("/api/notifications/")).data),m=u({name:"notifications",initialState:{notifications:[],status:"idle",error:null},extraReducers:o=>{o.addCase(c.pending,s=>{s.status="loading"}).addCase(c.fulfilled,(s,t)=>{s.status="succeeded",s.notifications=t.payload}).addCase(c.rejected,(s,t)=>{s.status="failed",s.error=t.error.message})}});m.reducer;const g=()=>{const o=r(e=>e.profiles.profiles),{user:s}=r(e=>e.auth),t=o.find(e=>e.user===s.id);return i.jsxs("div",{children:[i.jsx("h3",{children:"Profile"}),t&&i.jsxs("div",{children:[i.jsxs("p",{children:["Name: ",t.name]}),i.jsxs("p",{children:["Email: ",t.email]}),i.jsxs("p",{children:["Bio: ",t.bio]})]})]})},S=()=>{const o=r(e=>e.posts.posts),{user:s}=r(e=>e.auth),t=o.filter(e=>e.author===s.id);return i.jsxs("div",{children:[i.jsx("h3",{children:"Your Posts"}),t.map(e=>i.jsxs("div",{children:[i.jsx("h4",{children:e.title}),i.jsx("p",{children:e.content})]},e.id))]})},v=()=>{const o=r(e=>e.profiles.profiles),{user:s}=r(e=>e.auth),t=o.find(e=>e.user===s.id);return i.jsxs("div",{children:[i.jsx("h3",{children:"Followers"}),t&&i.jsx("ul",{children:t.followers.map(e=>i.jsx("li",{children:e.username},e.id))})]})},P=()=>{const o=r(s=>s.notifications.notifications);return i.jsxs("div",{children:[i.jsx("h3",{children:"Notifications"}),o.map(s=>i.jsx("div",{children:i.jsx("p",{children:s.message})},s.id))]})},N=()=>{const o=p(),{user:s}=r(n=>n.auth),t=r(n=>n.profiles.status),e=r(n=>n.posts.status),d=r(n=>n.notifications.status);return h.useEffect(()=>{t==="idle"&&o(a()),e==="idle"&&o(x()),d==="idle"&&o(c())},[t,e,d,o]),i.jsxs("div",{children:[i.jsx("h2",{children:"Dashboard"}),i.jsxs("p",{children:["Welcome, ",s.username,"!"]}),i.jsx(g,{}),i.jsx(S,{}),i.jsx(v,{}),i.jsx(P,{})]})};export{N as default};
